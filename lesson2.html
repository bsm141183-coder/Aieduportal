<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Урок 1. Что такое ИИ</title>
  <style>
    :root { --b:#dbe3ff; --bg:#f6f8ff; --btn:#2563eb; --mut:#667085; }
    body{font-family:system-ui,Segoe UI,Arial; margin:20px; background:var(--bg);}
    .wrap{max-width:980px; margin:0 auto;}
    h1{margin:0 0 10px; font-size:28px;}
    .muted{color:var(--mut); font-size:13px}
    .grid{display:grid; grid-template-columns: 1.2fr .8fr; gap:14px; align-items:start;}
    @media (max-width: 900px){ .grid{grid-template-columns:1fr;} }

    .card{background:#fff;border:1px solid var(--b);border-radius:14px;padding:14px;}
    .card h2{margin:0 0 10px; font-size:18px;}
    .btn{border:1px solid var(--b);border-radius:999px;padding:10px 14px;background:var(--btn);color:#fff;cursor:pointer}
    .btn.secondary{background:#fff;color:#111}
    .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center;}
    .hr{height:1px;background:var(--b); margin:12px 0;}

    /* Video */
    .video-wrap{position:relative; width:100%; padding-top:56.25%; border-radius:12px; overflow:hidden; border:1px solid var(--b);}
    .video-wrap iframe{position:absolute; inset:0; width:100%; height:100%; border:0; background:#000;}

    /* PDF (Google Viewer for proper scaling) */
    .pdf-wrap{
      border:1px solid var(--b);
      border-radius:12px;
      overflow:hidden;
      background:#fff;
      height:85vh;
      min-height:700px;
      max-height:1000px;
    }
    .pdf-wrap iframe{width:100%; height:100%; border:0; display:block;}

    /* TEST (embedded page) */
    #testCard{display:none; margin-top:14px;}
    .test-wrap{
      border:1px solid var(--b);
      border-radius:12px;
      overflow:hidden;
      height:80vh;
      min-height:600px;
      background:#fff;
    }
    .test-wrap iframe{width:100%; height:100%; border:0; display:block;}
  </style>
</head>

<body>
<div class="wrap">
  <h1>Урок 2. Где используется ИИ</h1>
  <div class="muted">Видео + теория в PDF + тест открывается на этой же странице</div>

  <div class="grid" style="margin-top:14px;">
    <!-- LEFT: Video + actions + embedded test -->
    <div class="card">
      <h2>Видеоурок</h2>

      <div class="video-wrap">
        <iframe
          id="videoFrame"
          loading="lazy"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          allowfullscreen
        ></iframe>
      </div>

      <div class="hr"></div>

      <div class="row">
        <button class="btn secondary" id="openTheoryBtn">Открыть теорию (PDF)</button>
        <button class="btn" id="startTestBtn">Пройти тест</button>
        <button class="btn secondary" id="hideTestBtn" style="display:none;">Скрыть тест</button>
      </div>

      <!-- TEST appears here -->
      <div class="card" id="testCard">
        <h2>Тест к уроку 1</h2>
        <div class="test-wrap">
          <iframe id="testFrame" title="Тест к уроку 1"></iframe>
        </div>
        <div class="muted" style="margin-top:8px;">
          Если тест не загружается в окне, откройте в новой вкладке:
          <a id="testLink" href="#" target="_blank" rel="noopener noreferrer">Открыть тест</a>
        </div>
      </div>
    </div>

    <!-- RIGHT: PDF theory -->
    <div class="card" id="theoryCard">
      <h2>Теория (PDF)</h2>

      <div class="pdf-wrap">
        <iframe id="pdfFrame" title="Теория PDF"></iframe>
      </div>

      <div class="muted" style="margin-top:8px;">
        Если PDF не отображается, откройте его в новой вкладке:
        <a id="pdfLink" href="#" target="_blank" rel="noopener noreferrer">Открыть PDF</a>
      </div>
    </div>
  </div>
</div>

<script>
  // =========================
  // ✅ МЕНЯЕТЕ ТОЛЬКО ЭТИ ССЫЛКИ (если нужно)
  // =========================
  const CONFIG = {
    youtubeUrl: "https://youtu.be/kIGQ7zHlU4s?si=jACuzkwVGoO8AcmN",
    pdfUrl: "https://bsm141183-coder.github.io/Aieduportal/assets/lesson1-ai.pdf",
    testPage: "test_ai.html" // ВАЖНО: файл test_ai.html должен быть рядом с lesson1.html
  };

  // UI
  const videoFrame    = document.getElementById("videoFrame");

  const pdfFrame      = document.getElementById("pdfFrame");
  const pdfLink       = document.getElementById("pdfLink");

  const openTheoryBtn = document.getElementById("openTheoryBtn");
  const startTestBtn  = document.getElementById("startTestBtn");
  const hideTestBtn   = document.getElementById("hideTestBtn");

  const testCard      = document.getElementById("testCard");
  const testFrame     = document.getElementById("testFrame");
  const testLink      = document.getElementById("testLink");

  // Video
  videoFrame.src = toYouTubeEmbedUrl(CONFIG.youtubeUrl);

  // PDF через Google Viewer (масштаб нормально на ПК/телефоне)
  const viewer =
    "https://drive.google.com/viewerng/viewer?embedded=true&url=" +
    encodeURIComponent(CONFIG.pdfUrl);

  pdfFrame.src = viewer;
  pdfLink.href = CONFIG.pdfUrl;

  // Scroll to theory
  openTheoryBtn.addEventListener("click", () => {
    document.getElementById("theoryCard").scrollIntoView({ behavior: "smooth", block: "start" });
  });

  // Test: open inside this page
  startTestBtn.addEventListener("click", () => {
    testCard.style.display = "block";
    hideTestBtn.style.display = "inline-block";

    testFrame.src = CONFIG.testPage;
    testLink.href = CONFIG.testPage;

    testCard.scrollIntoView({ behavior: "smooth", block: "start" });
  });

  // Hide test
  hideTestBtn.addEventListener("click", () => {
    testCard.style.display = "none";
    hideTestBtn.style.display = "none";
    testFrame.src = "about:blank";
  });

  // Helper: YouTube embed URL
  function toYouTubeEmbedUrl(url) {
    let id = "";
    try {
      const u = new URL(url);
      if (u.hostname.includes("youtu.be")) {
        id = u.pathname.replace("/", "").trim();
      } else if (u.hostname.includes("youtube.com") || u.hostname.includes("youtube-nocookie.com")) {
        if (u.pathname.startsWith("/embed/")) {
          id = u.pathname.split("/embed/")[1]?.split("/")[0] || "";
        } else {
          id = u.searchParams.get("v") || "";
        }
      }
    } catch (e) {
      const m = String(url).match(/(youtu\.be\/|v=|embed\/)([A-Za-z0-9_-]{6,})/);
      id = m ? m[2] : "";
    }
    if (!id) return "about:blank";
    return `https://www.youtube-nocookie.com/embed/${encodeURIComponent(id)}?rel=0&modestbranding=1`;
  }
</script>
</body>
</html>
