<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Промты — библиотека</title>
  <style>
    :root { --b:#dbe3ff; --bg:#f6f8ff; --mut:#667085; --card:#fff; }
    body{margin:0;font-family:system-ui,Segoe UI,Arial;background:var(--bg);}
    .app{display:grid;grid-template-columns:320px 1fr; height:100vh;}
    @media (max-width: 900px){ .app{grid-template-columns:1fr; grid-template-rows:auto 1fr;} }

    /* Sidebar */
    .sidebar{background:var(--card);border-right:1px solid var(--b);padding:14px;overflow:auto;}
    .title{font-size:18px;font-weight:800;margin:0 0 10px;}
    .muted{color:var(--mut);font-size:12px;margin-bottom:12px;line-height:1.35;}
    .list{display:flex;flex-direction:column;gap:8px;}
    .item{
      border:1px solid var(--b); border-radius:12px; padding:10px 10px;
      cursor:pointer; background:#fff;
    }
    .item:hover{filter:brightness(0.99);}
    .item.active{outline:2px solid #2563eb; border-color:#2563eb;}
    .item .name{font-weight:700;font-size:14px;margin:0 0 3px;}
    .item .desc{font-size:12px;color:var(--mut);margin:0;}

    /* Viewer */
    .viewer{padding:14px;overflow:hidden;}
    .viewerHeader{
      display:flex;align-items:center;justify-content:space-between;gap:10px;
      background:var(--card); border:1px solid var(--b); border-radius:14px; padding:10px 12px;
      margin-bottom:10px;
    }
    .viewerHeader .h{font-weight:800;}
    .viewerHeader a{font-size:12px;color:#2563eb;text-decoration:none}
    .frameWrap{
      background:var(--card); border:1px solid var(--b); border-radius:14px; overflow:hidden;
      height: calc(100vh - 90px);
    }
    iframe{width:100%;height:100%;border:0;}
  </style>
</head>
<body>
  <div class="app">
    <!-- LEFT -->
    <aside class="sidebar">
      <div class="title">Промты</div>
      <div class="muted">
        Нажмите на пункт слева — справа откроется PDF из Google Drive.
        <br>Если PDF не показывается, проверьте доступ: <b>Anyone with link</b>.
      </div>

      <div class="list" id="promptList"></div>
    </aside>

    <!-- RIGHT -->
    <main class="viewer">
      <div class="viewerHeader">
        <div class="h" id="viewerTitle">Выберите промт слева</div>
        <a id="openLink" href="#" target="_blank" rel="noopener noreferrer" style="display:none;">Открыть в новой вкладке</a>
      </div>

      <div class="frameWrap">
        <iframe id="pdfFrame" src=""></iframe>
      </div>
    </main>
  </div>

<script>
  // 1) Ваши ссылки из Google Drive (share links)
  const prompts = [
    {
      id: "p1",
      name: "Промт №1 — Генератор тестов",
      desc: "PDF на Google Drive",
      shareUrl: "https://drive.google.com/file/d/1HkLZbZuKi2fY3myMxgDaif6HCN_QA7GL/view?usp=sharing"
    },
    {
      id: "p2",
      name: "Промт №2 — Мини-тест за 2 минуты",
      desc: "PDF на Google Drive",
      shareUrl: "https://drive.google.com/file/d/1BEuVlfmNStjy2uZD1hLqBNlzKzqE-5Dm/view?usp=sharing"
    }
  ];

  // 2) Преобразование shareUrl -> embed/preview URL для iframe
  function toDrivePreviewUrl(shareUrl) {
    const m = shareUrl.match(/\/file\/d\/([^/]+)\//);
    if (!m) return shareUrl;
    const fileId = m[1];
    return `https://drive.google.com/file/d/${fileId}/preview`;
  }

  const listEl = document.getElementById("promptList");
  const frame = document.getElementById("pdfFrame");
  const viewerTitle = document.getElementById("viewerTitle");
  const openLink = document.getElementById("openLink");

  function renderList() {
    listEl.innerHTML = "";
    prompts.forEach((p, idx) => {
      const div = document.createElement("div");
      div.className = "item";
      div.innerHTML = `<div class="name">${p.name}</div><div class="desc">${p.desc}</div>`;
      div.addEventListener("click", () => selectPrompt(p.id));
      listEl.appendChild(div);
    });
  }

  function setActive(id) {
    [...document.querySelectorAll(".item")].forEach((el, i) => {
      const p = prompts[i];
      el.classList.toggle("active", p.id === id);
    });
  }

  function selectPrompt(id) {
    const p = prompts.find(x => x.id === id);
    if (!p) return;

    setActive(id);
    viewerTitle.textContent = p.name;

    frame.src = toDrivePreviewUrl(p.shareUrl);

    openLink.style.display = "inline";
    openLink.href = p.shareUrl;
  }

  renderList();
  // Открыть первый PDF сразу (можно убрать, если не нужно)
  if (prompts.length) selectPrompt(prompts[0].id);
</script>
</body>
</html>
